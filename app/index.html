<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">

  <!-- Favicon -->
  <link rel="shortcut icon" href="/assets/img/favicon.ico" />
  
  <!-- Stylesheets -->

  <link href="/app/solarApp.css" rel="stylesheet" type="text/css">
  <link href= "/bootstrap-3.2.0-dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" type="text/css" href="http://js.arcgis.com/3.9/js/esri/css/esri.css">
  
  <link href="http://cdn.jsdelivr.net/qtip2/2.2.1/jquery.qtip.min.css">
  
  <!-- Required JavaScript -->

  <script type='text/javascript' src='https://code.jquery.com/jquery-2.1.1.min.js'></script>
  <script type="text/javascript" src="/bootstrap-3.2.0-dist/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="/lib/d3/d3.min.js"></script>
  <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
  <script src="https://apis.google.com/js/client.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&amp;sensor=false&amp;libraries=places"></script>
  
  <script src="http://cdn.jsdelivr.net/qtip2/2.2.1/jquery.qtip.js"></script>
  
  <!-- Add mousewheel plugin (this is optional) -->
	<script type="text/javascript" src="/lib/fancyBox/lib/jquery.mousewheel-3.0.6.pack.js"></script>

	<!-- Add fancyBox main JS and CSS files -->
	<script type="text/javascript" src="/lib/fancyBox/source/jquery.fancybox.js?v=2.1.5"></script>
	<link rel="stylesheet" type="text/css" href="/lib/fancyBox/source/jquery.fancybox.css?v=2.1.5" media="screen" />

	<script type="text/javascript">
		$(document).ready(function() {

			$('.fancybox').fancybox();

		});
	</script>
	<style type="text/css">
		.fancybox-custom .fancybox-skin {
			box-shadow: 0 0 50px #222;
		}
	</style>
  <title>MN Solar Suitability Analysis App</title>

</head>

<body>

<!-- HEADER -->

  <div class="container-full">
    <div class="row" style="padding-top:5px">
	  <div id="headerBar">
        <div class="col-md-6">
		  <div class="row">
            <div class="col-md-12">
              <div class="input-group" style="margin-left:20px">
                <input type="text" class="form-control" placeholder="Search" id="searchBar">
                <span class="input-group-btn">
                  <button class="btn btn-default menuButton appButton" type="button" id="searchGo">Go</button>
                </span>
              </div><!-- /input-group -->
            </div><!-- /.col-lg-6 -->
          </div><!-- /.row -->
		</div>
		
		<div class="col-md-6">
          <div class="btn-toolbar" role="toolbar">
		    <div class="btn-group">
			  <button type="button" class="btn btn-default menuButton appButton iconButton " id="homeButton" style="border:none!important">
			    <div><img src="/assets/img/home_icon.png"><div class="iconLabel ">Home</div></button>
			  <button type="button" class="btn btn-default menuButton appButton iconButton" id="currentLoc" style="border:none!important" ><img src="/assets/img/location_icon_ios_2.png"><div class="iconLabel">Find Me</div></button>
	        </div>
			
		    <div class="dropdown" style="float:right; margin-right:20px;">
		      <div class="btn-group">
		        <button type="button" class="btn btn-default dropdown-toggle menuButton appButton" data-toggle="dropdown">
                  Menu
                  <span><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" height="20px"
        viewBox="-298 385.9 13.7 22.1" enable-background="new -298 385.9 13.7 22.1" xml:space="preserve">
<path fill="#FFFFFF" d="M-289.6,403.2l8.8-8.8c0.8-0.8,0.8-2.1,0-2.9l-0.7-0.7c-0.8-0.8-2.1-0.8-2.9,0l-6.7,6.7l-6.7-6.7
       c-0.8-0.8-2.1-0.8-2.9,0l-0.7,0.7c-0.8,0.8-0.8,2.1,0,2.9l8.8,8.8c0.4,0.4,1,0.6,1.6,0.6C-290.6,403.9-290,403.7-289.6,403.2z"/>
</svg></span>
                </button>
            
                <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="dropdownMenu1" style="top:47px">
                  <!--<li role="presentation"><input type='checkbox' class='list_item layerCheck' id='layer0CheckBox' value=0 />Counties</li>
                  <li role="presentation"><input type='checkbox' class='list_item layerCheck' id='layer1CheckBox' value=1 />EUSA</li>
                  <li role="presentation"><input type='checkbox' class='list_item layerCheck' id='layer2CheckBox' value=1 />Tiles</li>-->
                  <li role="presentation" class="divider"></li>
                  <li role="presentation"><div id="helpMenu"><a role="menuitem" tabindex="-1" href="#">HELP</a></div></li>
				  <li role="presentation" class="divider"></li>
				  <li role="presentation">
				    <div id="helpImageContainer">
				      <div class="helpImage">
				        <a href="http://www.esri.com" target="_blank"><img src="/assets/img/powered-by-esri-logo-med.png"></a>
				      </div>
				      <div class="helpImage">
				        <a href="http://www.umn.edu" target="_blanl"><img src="/assets/img/UMN_M_white.gif" style="margin-left:20px"></a>
				      </div>
				    </div>
				  </li>
			    </ul>
			  </div>
			</div> <!-- END DROPDOWN -->
          </div>
		</div>
	  </div>
	</div>
  </div>
  
<!-- Help Screen -->

  <div id="helpScreen">
    <h3>WELCOME</h3>
    <p>Tap anywhere on this map of Minnesota to view solar radiation per square meter, or tap the <img src="/assets/img/locate_button.gif" height="30px" style="margin-bottom:-10px;"/> icon to measure insolation at your current location. </p>
    <div id="colorRamp"> 
      <strong>LEGEND:</strong> <img src="/assets/img/ramp_v2.png" style="padding-top:8px;max-width:250px;"/><br />
    </div>
    <div id="website">
      <p><strong>LEARN MORE:</strong><br />
        <a href="http://solar.maps.umn.edu/" style="color:#ff7400">solar.maps.umn.edu</a> </p>
      <p> <br />
        <span class='closeSplash'>(X) CLOSE</span> </p>
    </div>
  </div>
  
  
<!-- Results 
  <div id="resultsHeader">
  
         <div class='showReport'><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="40px" height="40px" viewBox="-298 385.9 13.7 22.1" enable-background="new -298 385.9 13.7 22.1" xml:space="preserve">
        <path fill="#FFFFFF" d="M-292.7,390.7l-8.8,8.8c-0.8,0.8-0.8,2.1,0,2.9l0.7,0.7c0.8,0.8,2.1,0.8,2.9,0l6.7-6.7l6.7,6.7
            c0.8,0.8,2.1,0.8,2.9,0l0.7-0.7c0.8-0.8,0.8-2.1,0-2.9l-8.8-8.8c-0.4-0.4-1-0.6-1.6-0.6C-291.7,390.1-292.3,390.3-292.7,390.7z"/>
        </svg></div>
		<div style="text-align:center; color:white; width:100px; margin-left:-30px">
		  Full Report
		</div>
    </div>
-->
  <div id="resultsMinimized">
         <div class='showReport'><svg version="1.1" id="Capa_2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="40px" height="40px" viewBox="-298 385.9 13.7 22.1" enable-background="new -298 385.9 13.7 22.1" xml:space="preserve">
        <path fill="#FFFFFF" d="M-292.7,390.7l-8.8,8.8c-0.8,0.8-0.8,2.1,0,2.9l0.7,0.7c0.8,0.8,2.1,0.8,2.9,0l6.7-6.7l6.7,6.7
            c0.8,0.8,2.1,0.8,2.9,0l0.7-0.7c0.8-0.8,0.8-2.1,0-2.9l-8.8-8.8c-0.4-0.4-1-0.6-1.6-0.6C-291.7,390.1-292.3,390.3-292.7,390.7z"/>
        </svg></div>
		<div style="text-align:center; color:white; width:100px; margin-left:-30px">
		  Results
		</div>
    </div>

  <div id="resultsSmall">  
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-7">
          
        </div>
        <div class="col-md-5">
        	<div class="row">
        <div class="col-md-4">
          
            <div id="viewReport">
              <span id="viewReportLink"></span><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="20px" height="20px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve">
<g>
	<rect fill="#FFFFFF" x="160.008" y="384" width="159.984" height="32"/>
	<path fill="#FFFFFF" d="M128.008,32h255.984v64h32V32c0-17.656-14.313-32-32-32H128.008c-17.672,0-32,14.344-32,32v64h32V32z"/>
	<rect fill="#FFFFFF" x="160.008" y="320" width="191.984" height="32"/>
	<path fill="#FFFFFF" d="M479.992,128H32.008c-17.672,0-32,14.344-32,32v192c0,17.688,14.328,32,32,32h64v96c0,17.688,14.328,32,32,32h255.984
		c17.688,0,32-14.313,32-32v-96h64c17.688,0,32-14.313,32-32V160C511.992,142.344,497.68,128,479.992,128z M383.992,480H128.008V288
		h255.984V480z M447.992,224c-17.688,0-32-14.313-32-32c0-17.656,14.313-32,32-32s32,14.344,32,32
		C479.992,209.688,465.68,224,447.992,224z"/>
</g>
</svg>
            </div>
            
            </div>
        <div class="col-md-4">
            
                <div id="emailReport">
             <span id="emailReportLink"></span> <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 57.991 38.015" style="enable-background:new 0 0 57.991 38.015;" xml:space="preserve" width="20px" height="20px">
<g id="Shape_17">
	<g>
		<path fill="#FFFFFF" style="fill-rule:evenodd;clip-rule:evenodd;" d="M57.991,4.816c0-1.238-0.489-2.358-1.269-3.212
			c-0.013-0.017-0.016-0.037-0.03-0.054c-0.013-0.015-0.031-0.021-0.045-0.035C55.76,0.587,54.51,0,53.118,0H4.874
			C3.482,0,2.232,0.587,1.343,1.515C1.33,1.529,1.311,1.535,1.298,1.551c-0.014,0.016-0.017,0.037-0.03,0.054
			C0.489,2.459,0,3.578,0,4.816v28.384c0,1.268,0.509,2.415,1.323,3.276c0.016,0.018,0.021,0.04,0.039,0.057
			c0.006,0.006,0.013,0.007,0.019,0.013c0.887,0.904,2.122,1.47,3.493,1.47h48.244c1.371,0,2.607-0.567,3.493-1.471
			c0.006-0.005,0.013-0.007,0.019-0.012c0.017-0.016,0.022-0.038,0.038-0.055c0.815-0.861,1.324-2.009,1.324-3.278V4.816z
			 M39.01,17.508L55.722,3.651c0.164,0.356,0.261,0.749,0.261,1.165v28.384c0,0.376-0.078,0.733-0.213,1.062L39.01,17.508z
			 M53.118,1.985c0.421,0,0.818,0.096,1.179,0.258L28.996,23.22L3.695,2.243c0.361-0.162,0.758-0.258,1.179-0.258H53.118z
			 M2.222,34.261c-0.135-0.328-0.213-0.686-0.213-1.062V4.816c0-0.416,0.097-0.809,0.261-1.165l16.712,13.857L2.222,34.261z
			 M4.874,36.03c-0.464,0-0.896-0.12-1.284-0.314l16.936-16.929l7.825,6.488c0.186,0.155,0.416,0.233,0.645,0.233
			c0.229,0,0.459-0.078,0.645-0.233l7.825-6.488l16.936,16.929c-0.388,0.194-0.82,0.314-1.284,0.314H4.874z"/>
	</g>
</g>
</svg>
            </div>
           </div>
        <div class="col-md-4">
        <div id="closeResults">Close <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 32 32" style="enable-background:new 0 0 32 32;" xml:space="preserve" width="25px" height="25px">
<g id="Error">
	<g>
		<path fill="#FFFFFF" style="fill-rule:evenodd;clip-rule:evenodd;" d="M21.987,11.44c-0.015-0.363-0.15-0.723-0.428-1
			c-0.277-0.277-0.637-0.413-1-0.428c-0.404-0.017-0.813,0.119-1.121,0.428L16,13.879l-3.438-3.439
			c-0.309-0.309-0.717-0.444-1.121-0.428c-0.363,0.015-0.723,0.15-1,0.428c-0.277,0.277-0.413,0.637-0.428,1
			c-0.017,0.404,0.119,0.812,0.428,1.121L13.879,16l-3.438,3.438c-0.309,0.309-0.444,0.717-0.428,1.121
			c0.015,0.363,0.15,0.723,0.428,1c0.277,0.277,0.637,0.413,1,0.428c0.404,0.017,0.812-0.119,1.121-0.428L16,18.121l3.439,3.439
			c0.309,0.309,0.717,0.444,1.121,0.428c0.363-0.015,0.723-0.15,1-0.428c0.277-0.277,0.413-0.637,0.428-1
			c0.017-0.404-0.119-0.812-0.428-1.121L18.121,16l3.438-3.438C21.868,12.253,22.004,11.845,21.987,11.44z M16,0
			C7.164,0,0,7.164,0,16c0,8.836,7.164,16,16,16c8.836,0,16-7.164,16-16C32,7.164,24.836,0,16,0z M16,29C8.832,29,3,23.168,3,16
			C3,8.832,8.832,3,16,3s13,5.832,13,13C29,23.168,23.168,29,16,29z"/>
	</g>
</g>
</svg> </div>
        
            </div>
            </div>
        </div>
      </div>
      <div class="row">
	    <div class="col-md-4">
	      <div class="resultsDisplay noselect" id="results"></div>
	    </div>
	    <div class="col-md-8">
	      <div class="row" style="margin-top:40px;">
		    <div class="col-md-6">
              <div class="resultsDisplay noselect" id="resultsHisto" style="float:left; display:inline-block;"></div>
	        </div>
		    <div class="col-md-6">
		      <div class="resultsDisplay noselect" id="sunHrHisto" style="float:right; display:inline-block;"></div>
		    </div>
		  </div> <!-- INNER ROW END -->
	    </div>
	  </div> <!-- ROW END -->
    </div> <!-- CONTAINER END -->	
  </div> <!-- END ResultsSmall -->
  
  
<!-- ResultsBig -->
  <div id="resultsBig">
    <div id="closeBigResults">
         Close ( X )
    </div>
    
    <div id="resultsBigContent">
	</div>
  </div>
  <!-- integrate bad data, solar gardens, incentives -->
    
  </div>	
  
<!-- Loader -->
  <div id="loader">
    <p>Loading...</p>
    <div class="bubblingG">
      <span id="bubblingG_1">
      </span>
      <span id="bubblingG_2">
      </span>
      <span id="bubblingG_3">
      </span>
    </div>
  </div>

  
<!-- Map -->

  <div id="map" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'center'"></div>

  
<!-- Bottom bar (footer) -->
  
  <div id="bottomBar" style='position: absolute; display:none'>
    <div class="container-full">
      <div class="row" style="padding-top:5px">
	  
	    <div class="col-md-4">
        <img src="/assets/img/color_ramp_white_text.png" class="imgCenter" id="colorRamp">
      </div>
	  
	    <div class="col-md-4">
        <div class="baseMapToggle" style="margin-left:25%;">
		      <div class="btn-group">
            <button type="button" id="solarButton" class="btn btn-default activeButton appButton" style="border-radius:40px 0 0 40px">Solar</button>
	          <button type="button" id="aerialButton" class="btn btn-default appButton">Aerial</button>
	          <button type="button" id="streetButton" class="btn btn-default appButton" style="border-radius:0 40px 40px 0; margin-right:40px">Streets</button>
		      </div>
		    </div>
	    </div>

      <div class="col-md-4">
        <button type="button" class="btn btn-default menuButton appButton" style="float:right" id="resultsButton">Results
      
          <svg height="20px" width="20px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="-298 385.9 13.7 22.1" enable-background="new -298 385.9 13.7 22.1" xml:space="preserve">
<path fill="#FFFFFF" d="M-289.6,403.2l8.8-8.8c0.8-0.8,0.8-2.1,0-2.9l-0.7-0.7c-0.8-0.8-2.1-0.8-2.9,0l-6.7,6.7l-6.7-6.7
  c-0.8-0.8-2.1-0.8-2.9,0l-0.7,0.7c-0.8,0.8-0.8,2.1,0,2.9l8.8,8.8c0.4,0.4,1,0.6,1.6,0.6C-290.6,403.9-290,403.7-289.6,403.2z"/>
          </svg>
        </button>
      </div>

      

	  </div>
    </div>
  </div>


<!-- JavaScript -->

  <script type="text/javascript">
	  var basemapURL = 'http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/';  //imagery basemap
	  var imgDisplayURL = 'http://gis.uspatial.umn.edu/arcgis/rest/services/solar/mn_solar/ImageServer/'
    //var imgDisplayURL = 'http://us-dspatialgis.oit.umn.edu:6080/arcgis/rest/services/solar/Solar/ImageServer/';  //solar data for display
	  //var imgDisplayURL = 'https://us-spatial-test.oit.umn.edu/arcgis/rest/services/MN_Solar/ImageServer/';  //solar data for display (NEW)
	  var imgIdentifyURL = imgDisplayURL + 'identify';  //solar data for querying insolation
	  var vectorDataURL = 'http://us-dspatialgis.oit.umn.edu:6080/arcgis/rest/services/solar/solar_fgdb/MapServer/';
	  var bareEarthCountyURL = vectorDataURL + '1';  //vector layer for identifying counties with only bare earth lidar
	  var eusaURL = vectorDataURL + '0';  //utility service providers vector layer
  </script>

  <script type='text/javascript' src="http://js.arcgis.com/3.9/"></script>
  <script type='text/javascript' src="/app/solarApp.js"></script>

<!-- Google Analytics Tracking Snippet -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-36981530-2', 'auto');
    ga('send', 'pageview');
  </script>

</body>
</html>
